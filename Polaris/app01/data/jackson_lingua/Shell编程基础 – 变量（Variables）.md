
--- 
title:  Shell编程基础 – 变量（Variables） 
tags: []
categories: [] 

---
## Shell编程基础 – 变量（Variables）

### Shell Scripting Essentials – Variables

>  
 Bash变量作为shell脚本的重要组成部分，提供了在Unix/Linux命令行界面操作和保存数据的方法。 


本文简要介绍Bash Shell脚本变量的基础知识以及应用，包括**变量类型、声明方法、初始化及相关用法**，希望对您学习shell编程有所帮助。

以下内容分为三个部分： 1） Bash变量的基本概念； 2） Bash脚本中变量的类型； 3） Bash脚本的特殊变量和环境变量。

#### 1. Bash Shell变量基本概念

Bash 变量是操作shell编程语句的数据，也是随时可变的数据。变量可作为 bash 脚本中字符串或数字的临时存储容器。变量一经声明，可以帮助用户编写复杂的函数和执行各种操作，它在这些方面发挥着重要作用。

使用shell创建变量并为它们分配名称和相应的值。在分配值时，您可以自由使用适合您需求的任何**字符串或数字**。

为变量选择一个反映其值的名称通常是有益的，因为它可以更轻松地记住和区分脚本中的其他变量。

以下是需要牢记的其他一些重要语法注意事项：
1. 首先，为变量赋值时，请避免在等号 （=） 周围使用空格。例如，这样赋值：
```
name=”Jackson”

```

而不是这样， name = “Jackson”。
<li>若要访问存储在变量中的值，请使用美元符号 （ 
      
       
        
        
          ），后跟变量名称。例如， 
         
        
       
         ），后跟变量名称。例如， 
        
       
     ），后跟变量名称。例如，age将扩展为存储在 age 变量中的值。 如以下代码：</li>
```
echo "Your age is $age"

```
1. 您可以使用命令替换将命令的输出分配给变量。将命令括在反引号（）中或使用$（command） 语法。 例如，查看当前目录文件列表命令赋给所声明变量，并为其初始化为以下任意一种：
```
view_list =`ls` 

```

或者，

```
view_list =$(ls)

```
1.  在引号中使用变量时，请考虑引号的类型以存储数值。双引号 （“”） 允许变量扩展，而单引号 （‘’） 将变量名称保留为字面量字符串。 1.  如果要复原变量并删除它的值，那么需要使用 unset 命令，后跟变量名称。例如，依据上面的例子，执行: 
```
unset view_list

```

通过牢记这些语法格式，您可以避免常见错误并在脚本中有效地使用 bash 变量。

#### 2. 变量类型

Bash 变量根据其部署分为两种类型：**系统定义变量**和**用户定义变量**。

##### 1) 系统定义变量

Bash 中的系统定义变量是预定义的变量，提供有关系统和 shell 环境的信息。系统会自动设置这些变量，并且可以在 shell 脚本中访问和使用。以下是一些常用的系统定义变量:

<img src="https://img-blog.csdnimg.cn/601cacce298a4b76b7cc5a50e0a55d74.png" alt="在这里插入图片描述">

##### 2) 用户定义变量

Bash shell中的用户定义变量是您在 shell 脚本中创建并为其赋值的变量。系统不会预定义这些变量，可以根据您的需要进行定制。

#### 3. 在 Bash 脚本中使用变量

在 Bash 脚本中使用变量包含不同的上下文，例如使用特殊变量和环境变量，而不仅仅是在脚本中编写 bash 命令。

通过了解和利用这些不同上下文中的变量，您可以自定义行为、执行计算、处理用户输入以及使脚本适应不同的方案。

下面，下面是关于在 Bash 脚本中使用变量的讨论。所以，让我们开始吧。

##### 1) Bash 脚本中的变量数据类型

在 Bash 脚本中，变量不会使用特定数据类型显式声明。Bash 使用一个称为**动态类型**的概念，这意味着变量可以保存不同类型的值，并且它们的类型可以根据需要随时更改。

以下是有关 Bash 脚本中变量数据类型的一些要点：
- **字符串**：默认情况下，Bash 中的变量被视为字符串。它们可以保存字符序列，包括字母、数字和特殊字符。例如，
```
name="John"
age=“25

```
- **整数**：Bash 也支持整数算术，但您需要使用特定结构进行数值运算。您可以使用 let 命令或带有双括号的算术扩展来执行算术运算。例如，
```
num1=10
num2=5

```
- **数组**：Bash 支持一维数组，可以保存多个数值。例如，
```
fruits=（“apple”， “banana”， “orange”）

```

Bash 还支持关联数组，它允许您使用字符串作为索引。

– 布尔变量：Bash 没有专用的布尔数据类型，但你可以使用变量来表示 true/false 值（即将true/false赋值给布尔变量）。例如，

```
isTrue=true
isFalse=false

```

#### 4. 创建自己的变量

在 Bash 中创建变量时，任何不是环境变量的变量都被视为用户shell程序自身的变量。这些变量特定于您的脚本，不能在脚本之外被访问或修改，属于脚本的局部变量。这样可以确保您定义的变量不会干扰其他脚本或系统环境。

请务必遵循变量命名规则以避免语法错误。变量不能以数字开头，因为 Bash 将其解释为数值。此外，变量名称中不允许使用空格，因为它们用作 Bash 脚本中不同元素之间的分隔符。

但是，您可以在变量名称中使用下划线 （_） 和大写字母。也可以使用大写字母，但值得注意的是，Bash 区分大小写，因此使用一致的大写对于确保在整个脚本中正确引用变量非常重要。

```
view_list=`ls`

```

#### 5. Bash 脚本中使用的特殊变量

在 Bash 中使用特殊变量可以访问预定义值，这些值传达了有关环境和脚本执行的特定信息。此外，这些变量用于各种用途并协助编写脚本任务。以下是一些常用的特殊变量，描述如下：

<img src="https://img-blog.csdnimg.cn/a6c82182af1c4d19a29cf21c5ba4dfac.png" alt="在这里插入图片描述">

#### 6. 使用环境变量

Bash 中的环境变量可供特定系统上运行的所有脚本访问。与局部变量不同，环境变量由系统自动定义。环境变量的另一个重要方面是这些变量是用大写字母写的（例如：$HOME, $USER等）。它向用户清楚地表明他们正在使用环境变量。

下面概述了如何在 Bash 脚本中使用环境变量：
- **Bash 访问环境变量**：要访问环境变量的值，可以使用 $ 符号后跟变量名称。 设置环境变量：若要在 Bash 会话中设置环境变量，可以使用 export 命令。要使变量在多个 Bash 会话中持久化，您可以将 export 命令添加到 shell 配置文件（例如 ~/.bashrc 或 ~/.bash_profile）。- **删除环境变量**：要删除环境变量，可以使用 unset 命令。 列出所有环境变量：若要列出 Bash 会话中设置的所有环境变量，可以使用 env 命令或 printenv 命令。- **Bash 变量中的引号** 在 Bash 脚本中，引号在处理变量时起着重要作用。1. 双引号 （“”） 通常用于扩展变量并替换其值、执行命令和捕获其输出，以及转义某些字符。1. 另一方面，单引号 （“） 将变量和特殊字符视为文本字符串，从而防止任何扩展或替换。选择适当的引号类型对于在 Bash 脚本中有效操作变量至关重要。
#### 8. Shell脚本示例

现在，我们创建一个脚本check-in.sh, 并声明几个变量，用来登记酒店入住客人姓名和身份ID，并且为用户创建一个用户目录。这样，也对上述知识做个小结。

```
#！/bin/bash
echo “Register your personal information.”
read -p “Enter your name: “ n
echo “Welcome, Mr.$n!”
read -p “Enter your ID:” i
echo “Your ID is: $i”
echo “Making your user directory …”
cd /home
mkdir /home/$n
$PWD
echo “Congratulations! Your user directory is /home/$n”
date

```

执行结果如下图所示： <img src="https://img-blog.csdnimg.cn/3892446aed2e49e3ad27a9db0feed3a3.png" alt="在这里插入图片描述">

#### 9. 小结

总之，变量在Bash shell脚本中是必不可少的组件，它不但能够存储和操作数据，还支持计算、用户输入和数据存储等。本文试图帮助您了解 Bash 脚本中的变量，以便在应用中能够事半功倍。

技术好文陆续推出，敬请关注。 如果觉得本文有用，欢迎点赞！您的认可，我的动力！ 😊
