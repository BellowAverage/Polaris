
--- 
title:  PySide6/PyQTå¤šçº¿ç¨‹ä¹‹ ä¿¡å·ä¸æ§½ / (Signal Slot)çš„é«˜æ•ˆåˆ©ç”¨ 
tags: []
categories: [] 

---
<img src="https://img-blog.csdnimg.cn/f7369f6cbf92407999c2c4ebb9df8df8.jpeg#pic_center#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">

## å‰è¨€

>  
 **PySide6/PyQT**ä¿¡å·æ§½æ˜¯ä¸€ç§äº‹ä»¶å¤„ç†æ–¹å¼ï¼Œå…è®¸ç¨‹åºä¸­çš„å¯¹è±¡å‘é€å’Œæ¥æ”¶ä¿¡å·ã€‚ 


åœ¨ **PySide6/PyQT** ç²¾è¿›çš„è¿‡ç¨‹ä¸­ï¼Œä¸€å®šèº²ä¸å¼€ **ä¿¡å·å’Œæ§½** è¿™åº§å¤§å±±ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„çŸ¥è¯†ç‚¹ï¼š
- åˆæ¥è§¦çš„çœ‹ä¸æ‡‚ï¼Œè§‰å¾—å¤æ‚ï¼›- çœ‹å¾—æ‡‚çš„åˆè§‰å¾—ç®€å•ã€‚
ç®€å•å’Œéš¾å¦è¯´ï¼Œå°† **PySide6/PyQT** çš„ **ä¿¡å·å’Œæ§½** è®²çš„æ¸…æ¥šï¼Œè¿™ä¸ªæ‰æ˜¯é‡ç‚¹ã€‚

å…¶å®ä¹ŸæŒºç®€å•ï¼Œåˆ†ä¸‰æ­¥èµ°ï¼š
1. å®šä¹‰ä¿¡å·**Signal**1. å®šä¹‰æ§½**Slot**1. å°†ä¿¡å·å’Œæ§½è¿æ¥ï¼šSignal().<font color="bluesky">connect</font>.Slot()
æœ¬æ–‡ç»™ä½ æ‹æ¸…æ¥šå®ƒçš„å…·ä½“ä½¿ç”¨ï¼Œè®©ä½ è½»æ¾æŒæ¡è¿™ä¸€çŸ¥è¯†ç‚¹ï¼Œè·¨è¿‡è¿™åº§å¤§å±±ã€‚

## çŸ¥è¯†ç‚¹ğŸ“–ğŸ“–

æœ¬æ–‡ç”¨åˆ°çš„å‡ ä¸ª**PySide6**çš„çŸ¥è¯†ç‚¹åŠé“¾æ¥ã€‚

|ä½œç”¨|é“¾æ¥
|------
|åˆ›å»ºæ–°çº¿ç¨‹|
|å¯¹è±¡é—´é€šä¿¡çš„æœºåˆ¶ï¼Œå…è®¸å¯¹è±¡å‘é€å’Œæ¥æ”¶ä¿¡å·|
|ç”¨äºå“åº”**Signalä¿¡å·**çš„æ–¹æ³•|

### åŸºç¡€æ¦‚å¿µ

>  
 **PySide6/PyQT** ä¸­çš„ä¿¡å·å’Œæ§½æ˜¯ä¸€ç§å¯¹è±¡é—´é€šä¿¡æœºåˆ¶ã€‚ 


|ä¿¡å·ï¼ˆSignalï¼‰|æ§½ï¼ˆSlotï¼‰
|------
|äº‹ä»¶çš„å‘å°„è€…|å¯¹äº‹ä»¶çš„å“åº”
|åœ¨å¯¹è±¡ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶è¢«è§¦å‘|å“åº”ä¿¡å·çš„å‡½æ•°ï¼Œåœ¨ä¿¡å·å‘ç”Ÿæ—¶è¢«è°ƒç”¨

### ç†è§£ ä¿¡å·å’Œæ§½

ç”¨é€šä¿—æ˜“æ‡‚çš„è¯è§£é‡Š **PySide6/PyQT**çš„ä¿¡å·å’Œæ§½ï¼š

å°†**PySide6/PyQT** çš„ **ä¿¡å·å’Œæ§½** æœºåˆ¶ç®€å•åœ°ç†è§£ä¸ºä¸€ç§ <font color="red">è®¢é˜…æœºåˆ¶</font>ã€‚
- ä¿¡å·å……å½“äº† **å‘å¸ƒè€…**ï¼ˆ**publisher**ï¼‰çš„è§’è‰²ï¼Œè´Ÿè´£å‘å¸ƒæ¶ˆæ¯ï¼›- æ§½æ‰®æ¼”äº† **è®¢é˜…è€…**ï¼ˆ**subscriber**ï¼‰çš„è§’è‰²ï¼Œç”¨äºæ¥æ”¶æ¶ˆæ¯å¹¶ä½œå‡ºå“åº”ã€‚- æ§½å¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªä¿¡å·ï¼Œå½“ä¿¡å·å‘ç”Ÿæ—¶ï¼Œæ§½ä¼šè‡ªåŠ¨è¢«è°ƒç”¨æ‰§è¡Œã€‚
### ä¿¡å· Signal

>  
 åœ¨**PySide6/PyQT**ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ **Signal** æ¥å®šä¹‰ä¿¡å·ã€‚ 


**ä¿¡å·** æ˜¯ä¸€ç§ç‰¹æ®Šå‡½æ•°ï¼Œå¯ä»¥åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹è¢« **QObject** å¯¹è±¡ **å‘å°„ï¼ˆemitï¼‰**ã€‚
- ä¸‹é¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º **my_signal** çš„ä¿¡å·ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•´å½¢å‚æ•°ï¼ˆå¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥æ›´æ¢ä¸ºå…¶å®ƒç±»å‹
```
from PySide6.QtCore import (QThread, Signal)


class MyThread(QThread):
    my_signal = Signal(int)

```

### æ§½ Slot

>  
 åœ¨**PySide6/PyQT**ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ **@Slot()è£…é¥°å™¨** æ¥å®šä¹‰ **æ§½**ã€‚ 


**æ§½** æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œå®ƒå¯ä»¥è¢«ä¿¡å·è°ƒç”¨ã€‚å½“ä¸€ä¸ªä¿¡å·è¢«å‘å°„æ—¶ï¼Œä¸ä¹‹ç›¸è¿æ¥çš„æ§½å°†è¢«è°ƒç”¨ï¼Œå¹¶å°†ä¿¡å·çš„å‚æ•°ä¼ é€’ç»™æ§½ã€‚
- ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªåä¸º **my_slot** çš„æ§½ï¼Œå®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶æ‰“å°æ¥æ”¶åˆ°çš„æ•°æ®
```
from PySide6.QtCore import (QThread, Slot)


class MyThread(QThread):
    
    @Slot(int)
    def my_slot(self, data):
        print("Received data: ", data)

```

<font color="redsky">å€¼å¾—æ³¨æ„æ˜¯ï¼š</font>
- è¿™é‡Œçš„ **Slot(int)** å¯ä»¥ä¸å†™ï¼Œä½†æ˜¯å†™äº†å¯ä»¥æé«˜ä»£ç å¯è¯»æ€§å’Œæ‰§è¡Œæ•ˆç‡ã€‚- é¦–å…ˆï¼Œæ ‡æ˜è¿™æ˜¯ä¸€ä¸ªæ§½å‡½æ•°ï¼›- å…¶æ¬¡ï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è¿æ¥ä¿¡å·ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æœŸé—´ä¸éœ€è¦ç”Ÿæˆé¢å¤–çš„ä»£ç æ¥è¿æ¥ä¿¡å·å’Œæ§½ã€‚
### è¿æ¥ä¿¡å·å’Œæ§½

åœ¨ **PySide6/PyQT** ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ **connect()** æ–¹æ³•å°†ä¿¡å·å’Œæ§½ç›¸è¿æ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
- ä¸‹é¢ä»£ç å°†**sender**å¯¹è±¡çš„**my_signalä¿¡å·**ä¸**receiver**å¯¹è±¡çš„**my_slotæ§½**ç›¸è¿æ¥ã€‚- å½“**sender**å¯¹è±¡å‘å°„**my_signalä¿¡å·**æ—¶ï¼Œ**receiver**å¯¹è±¡çš„**my_slot**æ§½å°†è¢«è°ƒç”¨ã€‚
```
sender = MyThread()
receiver = MyThread()

sender.my_signal.connect(receiver)

```

å…¶å®å°±æ˜¯ ä½¿ç”¨ **connect** å°†ä¸¤è€…è¿æ¥èµ·æ¥ï¼›

### æ³¨æ„äº‹é¡¹

<font color="yellowred">é‡è¦çš„äº‹æƒ…è¦å¼ºè°ƒä¸‰éï¼</font>

ä¿¡å·å’Œæ§½åªèƒ½åœ¨ **QObject**çš„å­ç±»é‡Œä½¿ç”¨ï¼ï¼ï¼

ä¿¡å·å’Œæ§½åªèƒ½åœ¨ **QObject**çš„å­ç±»é‡Œä½¿ç”¨ï¼ï¼ï¼

ä¿¡å·å’Œæ§½åªèƒ½åœ¨ **QObject**çš„å­ç±»é‡Œä½¿ç”¨ï¼ï¼ï¼

ç„¶è€Œï¼Œåœ¨**PySide6/PyQT** ä¸­ï¼Œå¤§éƒ¨åˆ†å¸¸ç”¨çš„ç±»éƒ½æ˜¯ç»§æ‰¿äº†QObjectç±»çš„ï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜å€’æ— éœ€æ‹…å¿ƒï¼Œåªéœ€çŸ¥é“æœ‰è¿™ä¸€æ¦‚å¿µå³å¯ã€‚

ä¿¡å·å’Œæ§½å¿…é¡»æ˜¯ç›¸åŒçš„å‚æ•°ç±»å‹ã€‚åœ¨å®šä¹‰ä¿¡å·å’Œæ§½æ—¶ï¼Œå¿…é¡»ç¡®ä¿å®ƒä»¬çš„å‚æ•°ç±»å‹å’Œä¸ªæ•°æ˜¯ç›¸åŒçš„ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®è¿æ¥å’Œè§¦å‘ä¿¡å·å’Œæ§½ã€‚

ä¿¡å·å’Œæ§½å¿…é¡»æ˜¯ç›¸åŒçš„å‚æ•°ç±»å‹ã€‚åœ¨å®šä¹‰ä¿¡å·å’Œæ§½æ—¶ï¼Œå¿…é¡»ç¡®ä¿å®ƒä»¬çš„å‚æ•°ç±»å‹å’Œä¸ªæ•°æ˜¯ç›¸åŒçš„ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®è¿æ¥å’Œè§¦å‘ä¿¡å·å’Œæ§½ã€‚

ä¿¡å·å’Œæ§½å¿…é¡»æ˜¯ç›¸åŒçš„å‚æ•°ç±»å‹ã€‚åœ¨å®šä¹‰ä¿¡å·å’Œæ§½æ—¶ï¼Œå¿…é¡»ç¡®ä¿å®ƒä»¬çš„å‚æ•°ç±»å‹å’Œä¸ªæ•°æ˜¯ç›¸åŒçš„ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®è¿æ¥å’Œè§¦å‘ä¿¡å·å’Œæ§½ã€‚

### å¸¸è§å¼‚å¸¸

å¦‚æœåœ¨é **QObject** çš„å­ç±»ä¸­ä½¿ç”¨ **Signal** å’Œ **Slot**ä¼šé‡åˆ°ä¸€äº›å¼‚å¸¸æƒ…å†µã€‚è¿™æ˜¯å› ä¸ºåœ¨é **QObject** çš„å­ç±»ä¸­æ²¡æœ‰å®šä¹‰ **Signal** å’Œ **slot**ï¼Œä¹Ÿæ²¡æœ‰ **QObject** æä¾›çš„ä¿¡å·å’Œæ§½ç®¡ç†æœºåˆ¶ã€‚

åœ¨é **QObject** çš„å­ç±»ä¸­ä½¿ç”¨ **Signal** å’Œ **Slot**ï¼Œä¼šé‡åˆ°ä»¥ä¸‹å¼‚å¸¸æƒ…å†µï¼š
- å®šä¹‰ **Signal** æ—¶ä¼šå‡ºç° **NameError**ï¼Œå› ä¸º **Signal**æ˜¯åœ¨ **QObject** ä¸­å®šä¹‰çš„ï¼›- åœ¨ **connect()** æ—¶ä¼šå‡ºç° **AttributeError**ï¼Œå› ä¸º **connect()** æ˜¯ **QObject** çš„æˆå‘˜å‡½æ•°ï¼›- åœ¨ ä¿¡å·**emit()** æ—¶ä¼šå‡ºç° **AttributeError**ï¼Œå³å±æ€§é”™è¯¯ï¼Œå› ä¸ºè¯¥ç±»ä¸­æ²¡æœ‰è¯¥å‡½æ•°ã€‚
## ä¿¡å·å’Œæ§½ çš„åŸºæœ¬ä½¿ç”¨

>  
 è¯´å®Œäº† åŸºç¡€æ¦‚å¿µï¼Œç°åœ¨ä¸Šä»£ç æ¥æ£€éªŒå­¦ä¹ æˆæœäº†ã€‚ 


### ä»£ç 

```
# -*- coding: utf-8 -*-

import time


from PySide6.QtCore import (QThread, Signal, Slot, QSize)
from PySide6.QtWidgets import (QApplication, QPushButton, QLabel, QVBoxLayout, QWidget)


class MyThread(QThread):
    my_signal = Signal(int)
    finished_signal = Signal()

    def __init__(self, count):
        super().__init__()
        self.count: int = count

    def run(self):
        for idx in range(1, self.count + 1):
            time.sleep(1)
            # ä»»åŠ¡è¿›è¡Œæ—¶å‘å‡ºä¿¡å·
            self.my_signal.emit(idx)
	    # ä»»åŠ¡å®Œæˆåå‘å‡ºä¿¡å·
        self.finished_signal.emit()


class MainWindow(QWidget):

    def __init__(self, parent=None):
        super().__init__(parent=parent)
        self.setup_ui()
        #
        self.button.clicked.connect(self.setup_thread)

    def setup_ui(self):
        self.setWindowTitle('demo')
        self.resize(QSize(250, 180))
        # åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€
        layout = QVBoxLayout()
        # åˆ›å»ºä¸€ä¸ªæ ‡ç­¾
        self.label = QLabel('This is a label =&gt; ')
        layout.addWidget(self.label)
        # åˆ›å»ºä¸€ä¸ªæŒ‰é’®
        self.button = QPushButton('Send Request')
        layout.addWidget(self.button)
        # å°†å¸ƒå±€è®¾ç½®ä¸ºä¸»çª—å£çš„å¸ƒå±€
        self.setLayout(layout)
        # æ˜¾ç¤ºçª—å£
        self.show()

    def setup_thread(self):
        self.thread_ = MyThread(count=5)
        self.thread_.my_signal.connect(self.thread_progress)
        self.thread_.finished_signal.connect(self.thread_finished)
        self.thread_.start()

    @Slot(int)
    def thread_progress(self, item):
        self.label.setText('This is a label =&gt; ' + str(item))

    @Slot()
    def thread_finished(self):
        self.label.setText('This is a label finished.')


if __name__ == '__main__':
    app = QApplication([])
    window = MainWindow()
    window.show()
    app.exec()


```

<font color="yellowbulegreen"> **MyThread**ç±»</font>
- ç»§æ‰¿äº† **QObject**ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåä¸º **MyThread**çš„**QThread** ç±»ï¼›- åŒ…å«ä¸€ä¸ªåä¸º**my_signal** å’Œ **finished_signal** çš„ä¿¡å·ï¼Œå®ƒä»¬åˆ†åˆ«åœ¨ **ä»»ä½•è¿›è¡Œæ—¶** å’Œ **ä»»åŠ¡å®Œæˆå** å‘å°„ï¼›- æ³¨æ„ **my_signal** æ˜¯å¸¦å‚æ•°çš„ï¼Œè€Œ **finished_signal** ä¸å¸¦å‚æ•°ï¼Œè¿™ä¸ªéœ€è¦ä¸ æ§½å‡½æ•°å¯¹åº”ï¼ï¼ï¼- å¾ªç¯æ‰§è¡Œ **count** æ¬¡æ•°çš„æ“ä½œï¼Œæ¯æ¬¡ é€šè¿‡ **my_signal** å‘å°„ï¼Œä»è€Œä¿®æ”¹ åº”ç”¨ç¨‹åºä¸­çš„ **lable**ï¼›- å½“å¾ªç¯å®Œæˆåï¼Œé€šè¿‡ **finished_signal** å‘å°„ä¿¡å·ï¼Œä¿®æ”¹ åº”ç”¨ç¨‹åºä¸­çš„ **label**ã€‚
<font color="yellowbulegreen"> **MainWindow**ç±»</font>
- ç»§æ‰¿äº† **QWidget**ï¼Œå®ç°äº†åŒ…å«ä¸€ä¸ª**æŒ‰é’®**å’Œä¸€ä¸ª**æ ‡ç­¾**çš„ç®€å•çª—å£;- åœ¨**setup_thread** å‡½æ•°ä¸­ï¼Œå®ä¾‹åŒ–äº†**MyThread**ï¼Œå¹¶å°†å®ä¾‹åŒ–åçš„ **my_signal å’Œ finished_signal** ä¿¡å·è¿æ¥åˆ° **thread_progress å’Œ thread_finished** å‡½æ•°ï¼›- **thread_progress å’Œ thread_finished**ä¸ºæ§½å‡½æ•°ï¼Œå½“**my_signal å’Œ finished_signal**å‘å‡ºä¿¡å·æ—¶ï¼Œå¯¹åº”**Slot**(æ§½å‡½æ•°ï¼‰å°†è¢«è°ƒç”¨ï¼Œå¹¶ä¿®æ”¹**label** çš„æ˜¾ç¤ºã€‚
### è¿è¡Œæ•ˆæœ

<img src="https://img-blog.csdnimg.cn/e234c41749564551bc08f72817e48195.gif#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">

## åè¯

æœ¬æ¬¡åˆ†äº«åˆ°æ­¤ç»“æŸï¼Œ see you~ğŸ±â€ğŸğŸ±â€ğŸ
