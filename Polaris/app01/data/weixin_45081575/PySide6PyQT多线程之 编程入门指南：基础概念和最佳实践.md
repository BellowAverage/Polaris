
--- 
title:  PySide6/PyQTå¤šçº¿ç¨‹ä¹‹ ç¼–ç¨‹å…¥é—¨æŒ‡å—ï¼šåŸºç¡€æ¦‚å¿µå’Œæœ€ä½³å®è·µ 
tags: []
categories: [] 

---
<img src="https://img-blog.csdnimg.cn/f7369f6cbf92407999c2c4ebb9df8df8.jpeg#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">

## å‰è¨€

>  
 æœ¬ç¯‡æ–‡ç« ä»‹ç» **PySide6/PyQT**å¤šçº¿ç¨‹ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µï¼Œç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œä»¥åŠ**PySide6/PyQT**å¤šçº¿ç¨‹çš„åŸºæœ¬ä½¿ç”¨ã€‚ 


çœ‹å¤šçº¿ç¨‹ä»‹ç»ï¼Œå°±çœ‹ <font color="bluegreen"> **çŸ¥è¯†ç‚¹ğŸ“–ğŸ“–**</font> ï¼›

çœ‹å¤šçº¿ç¨‹ä»£ç ï¼Œå°±çœ‹ <font color="bluegreen"> **å®ç°**</font> ã€‚

## çŸ¥è¯†ç‚¹ğŸ“–ğŸ“–

æœ¬æ–‡ç”¨åˆ°çš„å‡ ä¸ª**PySide6**çš„çŸ¥è¯†ç‚¹åŠé“¾æ¥ã€‚

|ä½œç”¨|é“¾æ¥
|------
|åˆ›å»ºæ–°çº¿ç¨‹|
|å¯¹è±¡é—´é€šä¿¡çš„æœºåˆ¶ï¼Œå…è®¸å¯¹è±¡å‘é€å’Œæ¥æ”¶ä¿¡å·|
|ç”¨äºå“åº”**Signalä¿¡å·**çš„æ–¹æ³•|
|äº’æ–¥é”ï¼Œç”¨äºä¿æŠ¤å¯¹è±¡|
|ä¸ **QMutex**ä¸€èµ·ä½¿ç”¨|
||

### å¤šçº¿ç¨‹æ¨¡å—

å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨ **PySide6/PyQT** ä¸­å®ç°å¤šçº¿ç¨‹ï¼Œå¯ä»¥é€‰æ‹©çš„æœ‰å¾ˆå¤šï¼Œæœ‰ <font color="bluesky"> QObjectã€QThreadã€QRunnableã€QThreadPool</font> ç­‰ï¼›
- å…¶ä¸­**QThread**æ˜¯ç»§æ‰¿äº†**QObject** çš„ç±»ï¼Œå®ƒå¯ä»¥ä½œä¸ºåŸºç±»æ¥åˆ›å»ºè‡ªå®šä¹‰çš„çº¿ç¨‹ç±»ï¼›- **QThreadPool** æ˜¯ä¸€ä¸ªçº¿ç¨‹æ± ç±»ï¼Œå®ƒç®¡ç†ç€ä¸€ç»„çº¿ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è°ƒåº¦å’Œç®¡ç†çº¿ç¨‹çš„æ‰§è¡Œï¼›- **QRunnable** æ˜¯ä¸€ä¸ªä»»åŠ¡æ¥å£ï¼Œç”¨äºå°†ä»»åŠ¡å°è£…ä¸ºä¸€ä¸ªå¯åœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œçš„å¯¹è±¡ã€‚å¯ä»¥é€šè¿‡ç»§æ‰¿ **QRunnable** ç±»æ¥å®ç°è‡ªå®šä¹‰çš„ä»»åŠ¡ï¼Œå¹¶åœ¨ **QThreadPool** ä¸­æ‰§è¡Œã€‚
### å¤šçº¿ç¨‹é€šä¿¡å’ŒåŒæ­¥

>  
 åœ¨å¤šçº¿ç¨‹çš„ç¼–ç¨‹ä¸­ï¼Œçº¿ç¨‹ä¹‹é—´çš„**é€šä¿¡å’ŒåŒæ­¥**æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ã€‚ 


<font color="bluegreenyellow"> **é€šä¿¡ï¼š**</font>
- **PySide6/PyQT** æä¾›äº†**ä¿¡å·æ§½ï¼ˆSignal and Slotï¼‰** æœºåˆ¶ï¼Œå®ƒä»¬ç”¨äºåœ¨çº¿ç¨‹ä¹‹é—´ä¼ é€’æ¶ˆæ¯å’Œè§¦å‘äº‹ä»¶ã€‚é€šè¿‡åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­å‘é€ä¿¡å·å’Œè¿æ¥æ§½å‡½æ•°ï¼Œå¯ä»¥å®ç°çº¿ç¨‹é—´çš„é€šä¿¡ã€‚
<font color="bluegreenyellow"> **åŒæ­¥ï¼š**</font>
- åœ¨å…±äº«å¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æ—¶å€™å®¹æ˜“å‡ºç°æ„æ–™ä¹‹å¤–çš„é—®é¢˜ï¼Œéœ€è¦ä¿æŠ¤å¥½èµ„æºäº‰å¤ºï¼›- äº’æ–¥é”ï¼ˆ**QMutex**ï¼‰å’Œæ¡ä»¶å˜é‡ï¼ˆ**QWaitCondition**ï¼‰ç­‰åŒæ­¥æœºåˆ¶å¯ä»¥ç”¨äºæ§åˆ¶çº¿ç¨‹çš„å¹¶å‘è®¿é—®ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨å’Œé¿å…çº¿ç¨‹ç«äº‰ã€‚
### å¤šçº¿ç¨‹å¼‚å¸¸

è¿™ä¸ªè¾ƒä¸ºé€šä¿—æ˜“æ‡‚ï¼Œä¸€èˆ¬æ¥è¯´ ä½¿ç”¨ **try-except** å»æ•è·çº¿ç¨‹å†…éƒ¨å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ï¼Œå¹¶åœ¨ **except** è¯­å¥å—ä¸­å¤„ç†å¼‚å¸¸å³å¯ã€‚

å¼‚å¸¸å¤„ç†ï¼š
- åœ¨æ•è·åˆ°å¼‚å¸¸åï¼Œå¯ä»¥é€‰æ‹©é‡æ–°å°è¯•æ“ä½œã€å›é€€åˆ°å®‰å…¨çŠ¶æ€ã€é‡Šæ”¾èµ„æºã€æ‰“å°é”™è¯¯ä¿¡æ¯ç­‰ã€‚
å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨å¼‚å¸¸æ—¶å€™ ä½¿ç”¨**signal**ä¿¡å·å‘é€å¼‚å¸¸çš„æ¶ˆæ¯ã€‚ï¼ˆç¤ºä¾‹ä»£ç å¦‚ä¸‹

```
from PySide6.QtCore import QThread, Signal

class MyThread(QThread):
    # å®šä¹‰ä¸€ä¸ªçº¿ç¨‹å´©æºƒçš„ä¿¡å·
    thread_crashed = Signal(Exception)

    def run(self):
        try:
            # çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘
            pass
        except Exception as e:
            # å‘é€çº¿ç¨‹å´©æºƒçš„ä¿¡å·
            self.thread_crashed.emit(e)

```

### å¤šçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ

>  
 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼šçº¿ç¨‹çš„åˆ›å»ºã€å¯åŠ¨ã€è¿è¡Œã€æš‚åœã€æ¢å¤å’Œç»ˆæ­¢ç­‰é˜¶æ®µã€‚ 


åœ¨ä½¿ç”¨å¤šçº¿ç¨‹æ—¶å€™ï¼Œéœ€è¦æ³¨æ„å¤šçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚å› ä¸ºåˆç†ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥é¿å…çº¿ç¨‹èµ„æºçš„æµªè´¹å’Œæ³„æ¼ã€‚
-  å¦‚æœæ˜¯ä½¿ç”¨**QThread**ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å¤„ç†è¿™äº›æ“ä½œï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´èµ„æºæ³„æ¼æˆ–çº¿ç¨‹çš„æœªæ­£å¸¸é€€å‡ºã€‚ -  å¦‚æœæ˜¯ä½¿ç”¨ **QRunnbale + QThreadPool**ï¼Œä¸»çº¿ç¨‹åˆ™ä¼šæ ¹æ®çº¿ç¨‹æ± çš„è®¾ç½®è‡ªåŠ¨åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼Œä»è€Œå‡å°‘äº†æ‰‹åŠ¨ç®¡ç†çº¿ç¨‹çš„å¤æ‚æ€§ã€‚ 
æ‰€ä»¥æˆ‘æ¨èä½¿ç”¨ **QRunnbale + QThreadPool**ï¼Œå› ä¸ºçœäº‹~~

### å¤šçº¿ç¨‹ä¼˜å…ˆçº§

>  
 çº¿ç¨‹ä¼˜å…ˆçº§å†³å®šäº†çº¿ç¨‹åœ¨ç«äº‰CPUèµ„æºæ—¶çš„æ‰§è¡Œé¡ºåºï¼Œä¼˜å…ˆçº§è¶Šé«˜çš„çº¿ç¨‹åœ¨ç«äº‰CPUæ—¶ä¼šè¢«æ›´æ—©åœ°æ‰§è¡Œã€‚ 


å½“ç„¶ï¼Œè¿™ä¸ªçº¿ç¨‹ä¼˜å…ˆçº§å¹¶ä¸ä¸€å®šä¿è¯ç»å¯¹çš„æ‰§è¡Œé¡ºåºï¼Œåªæ˜¯ä¼˜å…ˆçº§è¶Šé«˜çš„åœ¨ç«äº‰CPUæ—¶å€™ï¼Œä¼šæœ‰æ›´é«˜çš„æ¦‚ç‡æ›´æ—©æ‰§è¡Œï¼›å› ä¸ºçº¿ç¨‹ä¼˜å…ˆçº§çš„å…·ä½“è¡¨ç°ä¼šå—åˆ°ç³»ç»Ÿçš„è°ƒåº¦ç®—æ³•å’Œèµ„æºæƒ…å†µçš„å½±å“ã€‚

### å¤šçº¿ç¨‹åº”ç”¨åœºæ™¯

>  
 å¦‚æœä½ çœ‹äº†è¿™ç¯‡æ–‡ç« ï¼Œé‚£ä¹ˆå¤§æ¦‚ä½ å·²ç»æœ‰äº† å¤šçº¿ç¨‹çš„åº”ç”¨åœºæ™¯äº†ã€‚ 


<font color="greenyellow"> **å¤§è‡´æœç½—äº†ä¸‹ï¼Œåº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š**</font>
1. åå°ä¸‹è½½æ–‡ä»¶ã€å›¾åƒå¤„ç†ï¼Œæ•°æ®å¤„ç†ç­‰ é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œæå‡å¤„ç†çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚1. ç½‘ç»œè¯·æ±‚ç½‘ç»œé€šä¿¡ç­‰ï¼›1. å¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œï¼›1. åæ­£ä¸€å¥è¯ï¼å°±æ˜¯é¿å…é˜»å¡ä¸»çº¿ç¨‹å¹¶æé«˜æ•ˆç‡ï¼ï¼ï¼
## å®ç°

### <font color="skyblue">QThread</font> å¤šçº¿ç¨‹

#### ä½¿ç”¨æ³¨æ„äº‹é¡¹

åœ¨ä½¿ç”¨ **PySide6** çš„ **QThread** æ—¶ï¼Œæ³¨æ„äº‹é¡¹åŒ…æ‹¬ä¸”ä¸å±€é™äºä»¥ä¸‹å‡ ç‚¹ï¼š
- ä¸è¦ä½¿ç”¨**PythonåŸç”Ÿ**çš„çº¿ç¨‹åº“æ¥å®ç°ï¼›- æ¶ˆæ¯æˆ–ä»»åŠ¡ç»“æœ é€šè¿‡**Signalä¿¡å·**æ¥ä¼ é€’ï¼›- ä¸è¦åœ¨**QThread**è°ƒç”¨ä¸»çº¿ç¨‹çš„**GUIæ§ä»¶**ï¼Œ**åº”ç”¨ç¨‹åº**ä¼šè¿›å…¥å¡æ­»çŠ¶æ€ï¼›<li>**QThreadå¯¹è±¡**å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºï¼Œå¦åˆ™ç¨‹åºå¯èƒ½ä¼šå¥”æºƒï¼› 
  <ul>- å› ä¸º**PySide6**æ˜¯åŸºäº**äº‹ä»¶å¾ªç¯**çš„æ¡†æ¶ï¼Œ**GUIçº¿ç¨‹**å’Œ**å­çº¿ç¨‹**éƒ½è¿è¡Œåœ¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ã€‚å¦‚æœåœ¨**å­çº¿ç¨‹**ä¸­åˆ›å»ºå’Œå¯åŠ¨**QThreadå¯¹è±¡**ï¼Œå®ƒä¼šå°è¯•åˆ›å»ºä¸€ä¸ª**æ–°çš„äº‹ä»¶å¾ªç¯**ï¼Œè¿™ä¼šå¯¼è‡´ä¸¤ä¸ª**äº‹ä»¶å¾ªç¯**å¹¶è¡Œè¿è¡Œï¼Œäº§ç”Ÿæ— æ³•é¢„ä¼°çš„ç»“æœã€‚
#### ä»£ç 

>  
 ä»£ç ç”¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„ï¼Œçœ‹è¿™é‡Œ â€” 


```
# -*- coding: utf-8 -*-

import time

import requests

from PySide6.QtCore import (QThread, Signal, Slot, QSize)
from PySide6.QtWidgets import (QApplication, QPushButton, QLabel, QVBoxLayout, QWidget)


class MyThread(QThread):
    signal_tuple = Signal(tuple)

    def __init__(self, func, *args, **kwargs):
        super().__init__()
        self.func = func
        self.args = args
        self.count: int = kwargs.get('count')

    def run(self):
        for idx in range(1, self.count + 1):
            result = self.func(*self.args)
            time.sleep(1)
            # ä»»åŠ¡å®Œæˆåå‘å‡ºä¿¡å·
            self.signal_tuple.emit((idx, result))


class MainWindow(QWidget):

    def __init__(self, parent=None):
        super().__init__(parent=parent)
        self.setup_ui()
        #
        self.button.clicked.connect(self.setup_thread)

    def setup_ui(self):
        self.setWindowTitle('demo')
        self.resize(QSize(250, 180))
        # åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€
        layout = QVBoxLayout()
        # åˆ›å»ºä¸€ä¸ªæ ‡ç­¾
        self.label = QLabel('This is a label =&gt; ')
        layout.addWidget(self.label)
        # åˆ›å»ºä¸€ä¸ªæŒ‰é’®
        self.button = QPushButton('Send Request')
        layout.addWidget(self.button)
        # å°†å¸ƒå±€è®¾ç½®ä¸ºä¸»çª—å£çš„å¸ƒå±€
        self.setLayout(layout)
        # æ˜¾ç¤ºçª—å£
        self.show()

    def setup_thread(self):
        self.thread_ = MyThread(self.send_request,
                                count=10)
        self.thread_.signal_tuple.connect(self.thread_finished)
        self.thread_.start()

    def send_request(self):
        return requests.get('https://www.csdn.net/').text[:15]

    @Slot(tuple)
    def thread_finished(self, item):
        self.label.setText('This is a label =&gt; ' + str(item))


if __name__ == '__main__':
    app = QApplication([])
    window = MainWindow()
    window.show()
    app.exec()


```

#### ä»£ç é‡Šä¹‰

<font color="bluesky" size="5">**MyTheradç±»** </font>
- ç»§æ‰¿äº†**QThread**ï¼›- åˆ›å»ºäº†ä¸€ä¸ª **signal_tuple**ä¿¡å·ï¼›- ç±»æ¥æ”¶ä¸€ä¸ª**func**å‡½æ•°ä»¥åŠä¸å®šé•¿çš„ä¼ å‚ï¼ˆè¿™é‡Œä¸»è¦ä¼ **func** å’Œ**count**ï¼›- é‡å†™ **run**æ–¹æ³•ï¼Œçº¿ç¨‹çš„ **start()** æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œ**run**æ–¹æ³•ï¼›- æ‰§è¡Œ **count** æ¬¡æ•°çš„**func**ï¼Œæ¯æ¬¡ç¡çœ 1ç§’ï¼Œä½¿ç”¨**signal_tuple** å°†æ‰§è¡Œç»“æœå’Œæ‰§è¡Œæ¬¡æ•°å‘é€å‡ºå»ã€‚
<font color="bluesky" size="5">**MainWindowç±»** </font>
- ç»§æ‰¿äº† **QWidget**ï¼Œå®ç°äº†åŒ…å«ä¸€ä¸ª**æŒ‰é’®**å’Œä¸€ä¸ª**æ ‡ç­¾**çš„ç®€å•çª—å£;- åœ¨**setup_thread** å‡½æ•°ä¸­ï¼Œå®ä¾‹åŒ–äº†**MyThread**ï¼Œå¹¶å°†å®ä¾‹åŒ–åçš„**signal_tuple**ä¿¡å·è¿æ¥åˆ° **thread_finished**å‡½æ•°ï¼›- **thread_finished**ä¸ºæ§½å‡½æ•°ï¼Œå½“**signal_tuple**å‘å‡ºä¿¡å·æ—¶ï¼Œè¿™**Slot**(æ§½å‡½æ•°ï¼‰å°†è¢«è°ƒç”¨ï¼Œå¹¶ä¿®æ”¹**label** çš„æ˜¾ç¤ºã€‚
åœ¨å®ä¾‹ä»£ç  ä»¥åŠ ä»£ç é‡Šä¹‰ä¸­å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°ï¼Œç¤ºä¾‹ä»£ç å®Œç¾ç¬¦åˆäº†æœ¬æ–‡ä¸­æˆ‘æŒ‡å‡ºæ¥çš„ **QThread å¤šçº¿ç¨‹**çš„å‡ ä¸ªæ³¨æ„äº‹é¡¹ï¼š
- ä½¿ç”¨**Signal**ä¿¡å·ä¼ é€’è¿è¡Œç»“æœï¼›- åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›æ–°å­çº¿ç¨‹ï¼›- ä¸åœ¨å­çº¿ç¨‹ä¸­ä¿®æ”¹ä¸»çº¿ç¨‹çš„æ§ä»¶ã€‚
ä»¥ä¸Šä¾¿æ˜¯ **QThread å¤šçº¿ç¨‹**åœ¨ **PySide6/PyQT** ä¸­çš„ç®€å•ä½¿ç”¨ã€‚

## åè¯

æœ¬æ¬¡åˆ†äº«åˆ°æ­¤ç»“æŸï¼Œ see you~~ğŸ±â€ğŸğŸ±â€ğŸ
