
--- 
title:  Pythonæ¨¡å—psutilï¼šç³»ç»Ÿè¿›ç¨‹ç®¡ç†ä¸Seleniumæ•ˆç‡æå‡çš„å®Œç¾ç»“åˆ 
tags: []
categories: [] 

---
<img src="https://img-blog.csdnimg.cn/66e3517fa2b74bbd99b152d8f5445cbc.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">

## å‰è¨€

åœ¨å‰é¢ç¼–å†™ä¸€ä¸ª`Selenium`çš„è‡ªåŠ¨åŒ–ç¨‹åºæ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ã€‚

å› ç¬”è®°æœ¬é…ç½®è¾ƒä¸ºå·®ï¼Œæ‰€ä»¥æ¯æ¬¡åˆå§‹åŒ–`Selenium`çš„`WebDriver`éƒ½ä¼šéå¸¸æ…¢ï¼Œæ•´ä¸ªç­‰å¾…è¿‡ç¨‹æ˜¯ä¸å‹å¥½çš„ã€‚

æ‰€ä»¥æˆ‘å°±æƒ³åˆ°ï¼š
<li> 
  <blockquote> 
   åœ¨ç¨‹åºä¸­åˆå§‹åŒ–ä¸€ä¸ªå…¨å±€çš„`WebDriver`å¯¹è±¡ï¼Œåœ¨ç¨‹åºç»“æŸä¹‹åä¸é€€å‡º`Selenium`æ‰“å¼€çš„æµè§ˆå™¨ã€‚ 
   è¿™æ ·å°±åªéœ€è¦å¯åŠ¨ä¸€æ¬¡`Selenium`æ‰“å¼€çš„æµè§ˆå™¨ï¼Œåé¢éƒ½ä½¿ç”¨è¿™ä¸ªæµè§ˆå™¨ã€‚ 
  </blockquote> </li>
è¿™æ ·çš„ç¡®æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä½†éšä¹‹è€Œæ¥çš„é—®é¢˜æ˜¯ï¼š
<li> 
  <blockquote> 
   ï¼Ÿä¸‡ä¸€`Selenium`æ‰“å¼€çš„æµè§ˆå™¨è¢«ç³»ç»Ÿå›æ”¶æˆ–è€…å‡ºç°å¼‚å¸¸äº†ï¼Œé‚£ä¹ˆç¨‹åºè¿è¡Œå°±ä¼šå‡ºé”™ï¼ 
  </blockquote> </li>
æ‰€ä»¥åœ¨æœ€ç»ˆï¼Œæ•´ä¸ªé—®é¢˜è§£å†³çš„æ€è·¯å¦‚ä¸‹ï¼š
1. ç¨‹åºè¿è¡Œå‰å…ˆæ£€æµ‹æŒ‡å®šçš„ `Seleniumæµè§ˆå™¨`ï¼ˆç³»ç»Ÿè¿›ç¨‹ï¼‰æ˜¯å¦å­˜åœ¨ï¼›1. å¦‚æœå­˜åœ¨åˆ™å¾€åè¿è¡Œç¨‹åºï¼›1. å¦‚æœä¸å­˜åœ¨åˆ™å…ˆæ‰“å¼€`Selenium`æµè§ˆå™¨ï¼Œå†å¾€åè¿è¡Œç¨‹åºã€‚
æ–‡ç« çš„æ ‡é¢˜è™½ç„¶ä¸º **Python psutilï¼šç³»ç»Ÿè¿›ç¨‹ç®¡ç†ä¸Seleniumæ•ˆç‡æå‡çš„å®Œç¾ç»“åˆ**ï¼Œä½†æ˜¯åº”ç”¨åœºæ™¯å´æ˜¯å¾ˆå¹¿çš„ï¼Œè­¬å¦‚ç³»ç»Ÿç›‘æ§ã€ç³»ç»Ÿç›‘æ§ã€æ€§èƒ½åˆ†æã€é™åˆ¶ç³»ç»Ÿèµ„æºã€ç®¡ç†è¿›ç¨‹ã€‚

æœ¬æ–‡ä¸»è¦å€ŸåŠ©äº `Python` çš„ `psutil`æ¨¡å—æ¥å®ç°ï¼Œæ‰€ä»¥ä¸‹é¢æ›´å¤šçš„æ˜¯ä»‹ç» `psutil`æ¨¡å—çš„ä½¿ç”¨ã€‚

å½“ç„¶ï¼Œé‡è¦çš„å¹¶ä¸æ˜¯ä½¿ç”¨ä»€ä¹ˆå·¥å…·ï¼Œè€Œæ˜¯æ€ä¹ˆä½¿ç”¨å·¥å…·ï¼Œä»¥åŠå·¥å…·èƒ½å¸®åŠ©æˆ‘ä»¬è§£å†³å“ªäº›é—®é¢˜ã€‚

## çŸ¥è¯†ç‚¹

|æ¨¡å—|è§£é‡Š
|------
||ç”¨äºåœ¨ Python ä¸­æ£€ç´¢æœ‰å…³è¿è¡Œè¿›ç¨‹å’Œç³»ç»Ÿåˆ©ç”¨ç‡ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€ä¼ æ„Ÿå™¨ï¼‰çš„ä¿¡æ¯ã€‚

å…·ä½“çš„ä»‹ç»çœ‹ä¸‹å›¾ï¼š

>  
 psutilï¼ˆpython system and process utilitiesï¼‰æ˜¯ä¸€ä¸ªè·¨å¹³å°åº“ï¼Œç”¨äºè®¿é—®æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹å’Œç³»ç»Ÿåˆ©ç”¨ç‡ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰ï¼‰ã€‚å®ƒä¸»è¦ç”¨äºç³»ç»Ÿç›‘æ§ï¼Œåˆ†æå’Œé™åˆ¶ç³»ç»Ÿèµ„æºï¼Œä»¥åŠç®¡ç†è¿è¡Œçš„è¿›ç¨‹ã€‚å®ƒå®ç°äº†Unixå‘½ä»¤è¡Œå·¥å…·æä¾›çš„è®¸å¤šåŠŸèƒ½ï¼Œå¦‚psã€topã€lsofã€netstatã€ifconfigã€whoã€dfã€killã€freeã€niceã€ioniceã€iostatã€iotopã€uptimeã€pidofã€ttyã€tasksetã€pmapç­‰ã€‚ 


<img src="https://img-blog.csdnimg.cn/5d8ab7851afd4e72bb4e6969b8eddd30.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">

## åº”ç”¨åœºæ™¯

åœ¨ä½¿ç”¨seleniumè¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•æ—¶ï¼Œæ¯æ¬¡å¼€å¯å’Œé”€æ¯æµè§ˆå™¨çª—å£éƒ½ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚ä½¿ç”¨psutilæ¥ç›‘æ§seleniumçš„æµè§ˆå™¨çª—å£ã€‚å¦‚æœæ£€æµ‹åˆ°çª—å£å·²ç»å­˜åœ¨ï¼Œå°±å¯ä»¥å¤ç”¨è¿™ä¸ªçª—å£ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„çª—å£ã€‚è¿™æ ·å¯ä»¥èŠ‚çœæ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚

**psutil**è¿˜å¯ä»¥ç”¨äºå¤šç§åœºæ™¯ï¼ŒåŒ…æ‹¬ç³»ç»Ÿç›‘æ§ã€æ€§èƒ½åˆ†æã€é™åˆ¶ç³»ç»Ÿèµ„æºã€ç®¡ç†è¿›ç¨‹ç­‰ã€‚

## psutilçš„åŸºç¡€ä½¿ç”¨

è¿™éƒ¨åˆ†æ“ä½œï¼Œåœ¨å®˜æ–¹æ–‡æ¡£ä¸­éƒ½å¯ä»¥æ‰¾åˆ°ã€‚

### è·å–CPU ä¿¡æ¯

```
import psutil

# è·å–CPUçš„æ•°é‡
cpu_count = psutil.cpu_count()
print(f'Number of CPUs: {<!-- -->cpu_count}')

# è·å–CPUçš„ä½¿ç”¨ç‡
cpu_percent = psutil.cpu_percent()
print(f'CPU usage: {<!-- -->cpu_percent}%')

# è·å–CPUçš„è¯¦ç»†ä¿¡æ¯
cpu_times = psutil.cpu_times()
print(f'CPU times: {<!-- -->cpu_times}')

```

### è·å– å†…å­˜ ä¿¡æ¯

```
# è·å–ç³»ç»Ÿçš„å†…å­˜ä½¿ç”¨æƒ…å†µ
mem_info = psutil.virtual_memory()
print(f'Memory info: {<!-- -->mem_info}')

# è·å–ç³»ç»Ÿçš„äº¤æ¢å†…å­˜ï¼ˆswapï¼‰ä½¿ç”¨æƒ…å†µ
swap_info = psutil.swap_memory()
print(f'Swap info: {<!-- -->swap_info}')

```

### è·å– ç£ç›˜ ä¿¡æ¯

```
# è·å–ç£ç›˜åˆ†åŒºä¿¡æ¯
disk_partitions = psutil.disk_partitions()
print(f'Disk partitions: {<!-- -->disk_partitions}')

# è·å–æ ¹ç›®å½•çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ
disk_usage = psutil.disk_usage('/')
print(f'Disk usage: {<!-- -->disk_usage}')

# è·å–ç£ç›˜IOä¿¡æ¯
disk_io = psutil.disk_io_counters()
print(f'Disk IO: {<!-- -->disk_io}')

```

### è·å– ç½‘ç»œ ä¿¡æ¯

```
# è·å–ç½‘ç»œIOä¿¡æ¯
net_io = psutil.net_io_counters()
print(f'Network IO: {<!-- -->net_io}')

# è·å–å½“å‰çš„ç½‘ç»œè¿æ¥ä¿¡æ¯
net_connections = psutil.net_connections()
print(f'Network connections: {<!-- -->net_connections}')

# è·å–ç½‘ç»œæ¥å£ä¿¡æ¯
net_if_addrs = psutil.net_if_addrs()
print(f'Network interface addresses: {<!-- -->net_if_addrs}')

# è·å–ç½‘ç»œæ¥å£çŠ¶æ€
net_if_stats = psutil.net_if_stats()
print(f'Network interface stats: {<!-- -->net_if_stats}')

```

### è·å– è¿›ç¨‹ ä¿¡æ¯

```
# è·å–å½“å‰è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹ID
pids = psutil.pids()
print(f'Process IDs: {<!-- -->pids}')

# è·å–æ‰€æœ‰è¿›ç¨‹å®ä¾‹
for proc in psutil.process_iter(['pid', 'name', 'username']):
    print(proc.info)

# è·å–æŒ‡å®šPIDçš„è¿›ç¨‹å®ä¾‹
pid = 1
if psutil.pid_exists(pid):
    proc = psutil.Process(pid)
    print(f'Process info: {<!-- -->proc.info()}')

```

## ç›‘æ§ç³»ç»Ÿè¿›ç¨‹ä»£ç 

### æŒ‡å®šchromeç‰ˆ

è¿™é‡Œç”¨åˆ°æˆ‘ä¹‹å‰çš„ä¸€ç¯‡`Selenium`æ–‡ç« ï¼Œ

æ–‡ç« ä¸­æåˆ°ï¼Œåœ¨å‘½ä»¤è¡Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å»é©±åŠ¨`Seleniumæµè§ˆå™¨`

```
chrome.exe --remote-debugging-port=9527 --user-data-dir=â€œF:\seleniumâ€

```

å› ä¸ºä½¿ç”¨äº†å‘½ä»¤è¡Œå»æ‰§è¡Œï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­éœ€è¦æ£€ç´¢ï¼šæ˜¯å¦åŒ…å«æŒ‡å®šå‘½ä»¤å‡½å‚æ•°

åœ¨æˆ‘çš„`Selenium`é¡¹ç›®ä¸­ï¼Œæ£€æµ‹è¯¥`Selenium`æµè§ˆå™¨å—å¦å­˜åœ¨çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
- çœ‹ä¸æ‡‚å°±çœ‹æ³¨é‡Šå•ªğŸ¥§~
<img src="https://img-blog.csdnimg.cn/b07c6618b9c6484183dac95b13de08a3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">

**ä»£ç é‡Šä¹‰ï¼š**

è¿™ä»½ä»£ç çš„ä¸»è¦ç”¨é€”æ˜¯æ£€æŸ¥æ˜¯å¦æœ‰åŒ…å«ç‰¹å®šå‘½ä»¤è¡Œå‚æ•°çš„Chromeæµè§ˆå™¨è¿›ç¨‹æ­£åœ¨è¿è¡Œã€‚å®ƒéå†æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œå¦‚æœè¿›ç¨‹çš„åç§°åŒ…å«"chrome"ï¼Œå¹¶ä¸”å‘½ä»¤è¡Œå‚æ•°ä¸­åŒ…å«`--remote-debugging-port=port`ï¼Œé‚£ä¹ˆå°±è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseã€‚è¿™å¯¹äºè‡ªåŠ¨åŒ–æµ‹è¯•éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é¿å…é‡å¤åˆ›å»ºå’Œé”€æ¯æµè§ˆå™¨çª—å£ï¼Œä»è€ŒèŠ‚çœç³»ç»Ÿèµ„æºã€‚

### é€šç”¨ç‰ˆ

ä¸‹é¢å‡½æ•°å¯ä»¥ç”¨äºç›‘æ§ç‰¹å®šçš„è¿›ç¨‹æ˜¯å¦åœ¨è¿è¡Œã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªé‡è¦çš„æœåŠ¡æˆ–åº”ç”¨ï¼Œä½ å¸Œæœ›ç¡®ä¿å®ƒå§‹ç»ˆåœ¨è¿è¡Œã€‚ä½ å¯ä»¥å®šæœŸè¿è¡Œè¿™ä¸ªå‡½æ•°æ¥æ£€æŸ¥è¿™ä¸ªæœåŠ¡æˆ–åº”ç”¨æ˜¯å¦åœ¨è¿è¡Œï¼Œå¦‚æœä¸åœ¨è¿è¡Œï¼Œå¯ä»¥é‡‡å–ç›¸åº”çš„æ“ä½œï¼Œå¦‚é‡æ–°å¯åŠ¨æœåŠ¡æˆ–åº”ç”¨ã€‚

```
import os
import subprocess

import psutil


def check_if_specific_process_running(process_name, cmdline=None) -&gt; bool:
    """
    æ£€æŸ¥æ˜¯å¦æœ‰åŒ…å«æŒ‡å®šåç§°çš„è¿›ç¨‹æ­£åœ¨è¿è¡Œã€‚
    
    Args:
        process_name(str): è¦æ£€æŸ¥çš„è¿›ç¨‹å
        cmdline(str): è¦æ£€æŸ¥çš„å‘½ä»¤è¡Œå‚æ•°ã€‚é»˜è®¤ä¸ºNoneã€‚

    Returns:
        bool: å¦‚æœæ‰¾åˆ°åŒ¹é…çš„è¿›ç¨‹åˆ™è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseã€‚
    """
    # éå†æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹
    for proc in psutil.process_iter():
        try:
            # æ£€æŸ¥è¿›ç¨‹åæ˜¯å¦åŒ…å«ç»™å®šçš„åç§°å­—ç¬¦ä¸²
            if process_name.lower() in proc.name().lower():
                # è·å–è¿›ç¨‹è¯¦ç»†ä¿¡æ¯åˆ—è¡¨
                p_info = proc.as_dict(attrs=['pid', 'name', 'cmdline'])
                # å¦‚æœæä¾›äº†cmdlineï¼Œæ£€æŸ¥å®ƒæ˜¯å¦åœ¨è¿›ç¨‹çš„cmdlineä¸­
                if cmdline:
                    if any(cmdline in cmd for cmd in p_info['cmdline']):
                        return True
                # å¦‚æœæ²¡æœ‰æä¾›cmdlineï¼Œè¿”å›Trueï¼Œå› ä¸ºè¿›ç¨‹ååŒ¹é…
                else:
                    return True
        except (psutil.NoSuchProcess, psutil.AccessDenied, psutil.ZombieProcess):
            pass
    return False


def exec_cmd_command():
    """
    åˆ‡æ¢åˆ°æŒ‡å®šè·¯å¾„ï¼Œè‹¥æœ‰ã€‚ç„¶åæ‰“å¼€æµè§ˆå™¨

    Returns:
        True
    """
    os.chdir(path=config.CHROME_PATH)
    subprocess.Popen(
        r'chrome.exe --remote-debugging-port=9527 --user-data-dir="F:\selenium"',
        shell=True,
        stdout=subprocess.PIPE,
        stderr=subprocess.PIPE
    )
    return True


if __name__ == '__main__':
    if not check_if_specific_chrome_running():
        # æ‰“å¼€æµè§ˆå™¨
        exec_cmd_command()

```

## æ€»ç»“

psutilæ˜¯ä¸€ä¸ªå¼ºå¤§çš„åº“ï¼Œå¯ä»¥ç”¨äºè·å–ç³»ç»Ÿå’Œè¿›ç¨‹çš„ä¿¡æ¯ï¼Œä»¥åŠç®¡ç†è¿›ç¨‹ã€‚å®ƒåœ¨ç³»ç»Ÿç›‘æ§ã€æ€§èƒ½åˆ†æã€èµ„æºç®¡ç†ç­‰æ–¹é¢éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚æœ¬æ–‡ä¸­ä»£ç æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨psutilæ¥æ£€æŸ¥ç‰¹å®šçš„æµè§ˆå™¨è¿›ç¨‹æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œä»è€Œé¿å…é‡å¤åˆ›å»ºå’Œé”€æ¯çª—å£ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æºã€‚

## åè¯

æœ¬æ¬¡åˆ†äº«åˆ°æ­¤ç»“æŸï¼Œ

see youğŸ‰ğŸ‰
